<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is it 20XX Yet?</title>
    <link rel="icon" href="https://fav.farm/ðŸ’©" />
    <link rel="stylesheet" href="./styles.css" />
</head>
<body>
    <main>
        <h1>Is it <code id="yrs">20XX</code><span id="yet"> yet?</span> <span id="yn">Not Yet.</span></h1>
        <code class="h2">Time Left: <time id="t">{ Insert current time with edge function maybe }</time></code>
        <details>
            <summary>What does <code>20XX</code> mean?</summary>
            <p><code>20XX</code>, also pronounced as <i>twenty exty ex</i>, is a short hand seen in some video games to mean "sometime in the near future".</p>
            <p>When I played the Megaman series, I would also see <code>201X</code> (<i>twenty exteen</i>) or <code>202X</code> (<i>twenty twenty ex</i>). But as each decade comes and goes, each version ends up becoming outdated. The fix? <code>20XX</code>.</p>
            <p>This site is dedicated to the future and to optimism! <b>Here's to <code>21XX</code>!</b></p>
        </details>
    </main>
    <footer>
        <small>Made with <code>{emoji}</code> by <a href="https://gingerchew.link">ginger</a>. <a href="https://github.com/gingerchew/20XX.day">Github</a></small>
    </footer>
    <script>
let xx = new Date('2100-01-01'),
  b = "<br/>",
  M = Math.floor,
  content,
  ms,
  showMs = false,
  convertToParts = ts => {
  const M = Math.floor
  const getMin = n => M((n / 60) % 60);
  const getHour = n => M((n / 60 / 60) % 24);
  const getDay = n => M((n / 60 / 60 / 24) % 30);
  const getMonth = n => M((n / 60 / 60 / 24 / 30) % 12);
  const getYear = n => M(n / 60 / 60 / 24 / 30 / 12);
    return { 
        years: getYear(ts),
        months: getMonth(ts),
        days: getDay(ts),
        hours: getHour(ts),
        minutes: getMin(ts)
    }
},
updateTime = () => {
  let now = new Date(Date.now()), left = (xx.getTime() - now.getTime()) / 1000

  if (left <= 0) {
    yn.textContent = 'It Is!!';
    t.innerHTML = '';
    return;
  }

  const _parts = convertToParts(left);
  const htmlParts = [b];
  for (let [unit, value] of Object.entries(_parts)) {
    htmlParts.push(`<span>${value}&nbsp;${unit}</span>`);
    if (unit === 'months') {
    	htmlParts.push(b);
    }
  }
  content = htmlParts.join(' ');
  ms = left + 'ms';

  t.innerHTML = showMs ? ms : content;
}
updateTime();
yrs.addEventListener('click', () => {
    showMs = !showMs;
    t.innerHTML = showMs ? ms : content;
}, true);
yet.addEventListener('click', () => {
    updateTime();
})
    </script>
</body>
</html>